var wplc_is_chat_open=!1;jQuery(function(){function n(a,c,e){"undefined"==typeof c&&(c=!1),"undefined"==typeof e&&(e=!1),a.first_run=c,a.short_poll=e,jQuery.ajax({url:wplc_ajaxurl,data:a,type:"POST",success:function(c){if(k=1500,c){if("0"===c)return window.console&&console.log("WP Live Chat Support Return Error"),void(l=!1);if(c=JSON.parse(c),a.wplc_name=c.wplc_name,a.wplc_email=c.wplc_email,a.action_2="",a.cid=c.cid,Cookies.set("wplc_cid",c.cid,{expires:1,path:"/"}),Cookies.set("wplc_name",c.wplc_name,{expires:1,path:"/"}),Cookies.set("wplc_email",c.wplc_email,{expires:1,path:"/"}),b=jQuery.trim(c.cid),d=c.status,Cookies.set("wplc_chat_status",null,{path:"/"}),Cookies.set("wplc_chat_status",d,{expires:1,path:"/"}),jQuery.event.trigger({type:"wplc_user_chat_loop",response:c}),a.status==c.status){if(5==a.status&&g===!0&&q!==!1&&q(a.cid,a.status),3==c.status&&null!=c.data&&(l=!0,"undefined"!=typeof niftyFormatParser?jQuery("#wplc_chatbox").append(niftyFormatParser(c.data.wplcStripSlashes())):jQuery("#wplc_chatbox").append(c.data.wplcStripSlashes()),c.data)){var e=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(e),"undefined"!=typeof wplc_enable_ding&&"1"===wplc_enable_ding&&new Audio(wplc_plugin_url+"/wp-live-chat-support/ding.mp3").play()}}else if(a.status=d,Cookies.set("wplc_chat_status",d,{expires:1,path:"/"}),0==c.status)jQuery("#wp-live-chat-3").hide(),jQuery("#wp-live-chat-react").show().empty().append("<center>"+c.data+"</center>");else if(8==c.status){l=!1,jQuery("#wp-live-chat-minimize").show(),document.getElementById("wplc_chatmsg").disabled=!0,jQuery("#wplc_chatbox").append("<em>"+c.data+"</em><br />");var e=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(e),jQuery.event.trigger({type:"wplc_end_chat"})}else if(11==parseInt(c.status))jQuery("#wp-live-chat").css({display:"none"}),l=!1;else if((3==parseInt(c.status)||10==parseInt(c.status))&&(l=!0,jQuery("#wplc_cid").val(b),3==parseInt(c.status)&&(s(0),jQuery("#wp-live-chat").hasClass("wplc_left")!==!0&&jQuery("#wp-live-chat").hasClass("wplc_right")!==!0||jQuery("#wp-live-chat").height("400px")),10==parseInt(c.status)&&(l=!0,s(0)),null!=c.data&&("undefined"!=typeof niftyFormatParser?jQuery("#wplc_chatbox").append(niftyFormatParser(c.data.wplcStripSlashes())):jQuery("#wplc_chatbox").append(c.data.wplcStripSlashes()),c.data))){var e=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(e)}}},error:function(a,b){k=5e3,404==a.status?(o("Error: Requested page not found. [404]"),l=!1):500==a.status?(o("Error: Internal Server Error [500]."),o("Retrying in 5 seconds..."),l=!0):"parsererror"===b?(o("Error: Requested JSON parse failed."),l=!1):"abort"===b?(o("Error: Ajax request aborted."),l=!1):(o("Error: Uncaught Error.\n"+a.responseText),o("Retrying in 5 seconds..."),l=!0)},complete:function(b){l&&setTimeout(function(){n(a,!1,!1)},k)},timeout:12e4})}function o(a){window.console&&console.log(a),jQuery("#wplc_chatbox").append("<small>"+a+"</small><br>");var b=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(b)}function q(a,b){9==d&&"yes"==c||"yes"!=c&&(wplc_dc=setTimeout(function(){var a=jQuery("#wp-live-chat"),b=jQuery(a).attr("wplc_animation");switch(b){case"none":jQuery(a).css("display","block");break;case"animation-1":jQuery(a).animate({marginBottom:"0px"},1e3);break;case"animation-2-bl":jQuery(a).animate({left:"100px"},1e3);break;case"animation-2-br":jQuery(a).animate({right:"100px"},1e3);break;case"animation-2-l":jQuery(a).animate({left:"0px"},1e3);break;case"animation-2-r":jQuery(a).animate({right:"0px"},1e3);break;case"animation-3":jQuery(a).fadeIn("slow");case"animation-4":jQuery(a).css("display","block");break;default:jQuery(a).css("display","block")}"1"===jQuery("#wp-live-chat").attr("wplc-auto-pop-up")&&s(0),jQuery.event.trigger({type:"wplc_animation_done"})},parseInt(window.wplc_delay))),q=!1}function s(a){if(jQuery.event.trigger({type:"wplc_open_chat_1"}),d=Cookies.get("wplc_chat_status"),3==parseInt(d)){jQuery.event.trigger({type:"wplc_open_chat_2",wplc_online:h}),Cookies.set("wplc_had_chat",!0,{path:"/"});var c={action:"wplc_user_maximize_chat",security:wplc_nonce,cid:b};jQuery.post(wplc_ajaxurl,c,function(a){})}else if(10==parseInt(d))jQuery("#wp-live-chat-minimize").trigger("click");else if(5==d||9==d||8==d){if(jQuery("#wp-live-chat-2").is(":visible")===!1&&jQuery("#wp-live-chat-4").is(":visible")===!1){jQuery("#wp-live-chat-2").show();var e=Cookies.get("wplc_name");"no email set"!==Cookies.get("wplc_email")&&e.indexOf("user")>=0&&(jQuery("#wplc_name").val(Cookies.get("wplc_name")),jQuery("#wplc_email").val(Cookies.get("wplc_email")))}}else if(2==d)jQuery("#wp-live-chat-3").show();else if(1==d){jQuery("#wp-live-chat-4").show(),jQuery("#wplc_social_holder").show(),jQuery("#nifty_ratings_holder").show(),jQuery.event.trigger({type:"wplc_animation_done"}),jQuery("#wplc_chatbox").append("The chat has been ended by the operator.<br />");var f=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(f),jQuery("#wp-live-chat-minimize").hide(),document.getElementById("wplc_chatmsg").disabled=!0}}function t(a){return a=a.replace(/<br>/gi,"\n"),a=a.replace(/<p.*>/gi,"\n"),a=a.replace(/<a.*href="(.*?)".*>(.*?)<\/a>/gi," $2 ($1) "),a=a.replace(/<(?:.|\s)*?>/g,""),a=a.replace("iframe",""),a=a.replace("src",""),a=a.replace("href",""),a=a.replace("<",""),a=a.replace(">","")}function u(a,b){"undefined"!=typeof d.length&&d.length>0&&(10!==parseInt(d)&&7!==parseInt(d)||Cookies.set("wplc_chat_status",3,{expires:1,path:"/"}),0===parseInt(d)&&Cookies.set("wplc_chat_status",5,{expires:1,path:"/"}),8===parseInt(d)&&Cookies.set("wplc_chat_status",5,{expires:1,path:"/"})),b()}var b,c,a=(new Date).getTime(),d="",e="",f="",g=!0,b=null,h=!1,i={},k=1500;b=Cookies.get("wplc_cid"),b="undefined"==typeof b?null:Cookies.get("wplc_cid"),c=Cookies.get("wplc_hide"),wplc_check_minimize_cookie=Cookies.get("wplc_minimize"),d=Cookies.get("wplc_chat_status"),e=Cookies.get("wplc_name"),f=Cookies.get("wplc_email"),Cookies.set("wplc_chat_status",5,{expires:1,path:"/"}),d=5;var l=!0,m={action:"wplc_get_chat_box",security:wplc_nonce};if(jQuery.ajax({url:wplc_ajaxurl_site,data:m,type:"POST",success:function(c){if(c){if("0"===c)return window.console&&console.log("WP Live Chat Support Return Error"),void(l=!1);if(c=JSON.parse(c),jQuery("body").append(c.cbox),"undefined"==typeof e||"undefined"==typeof f)var e=jQuery(jQuery.parseHTML(c.cbox)).find("#wplc_name").val(),f=jQuery(jQuery.parseHTML(c.cbox)).find("#wplc_email").val();c.online===!1?(l=!1,h=!1):h=!0,"1"===wplc_filter_run_override&&h!==!1||(l=!1);var j=!1;"undefined"==typeof wplc_is_mobile||"true"!==wplc_is_mobile&&wplc_is_mobile!==!0||(j=!0);var k={action:"wplc_call_to_server_visitor",security:wplc_nonce,cid:b,wplc_name:e,wplc_email:f,status:d,wplcsession:a,wplc_is_mobile:j,wplc_extra_data:wplc_extra_data};i=k,"1"!==wplc_filter_run_override||h===!1?n(k,!0,!0):n(k,!0,!1),null!==b&&1==g&&q!==!1&&q(b,d)}}}),jQuery("#wp-live-chat [placeholder]").focus(function(){var a=jQuery(this);a.val()==a.attr("placeholder")&&(a.val(""),a.removeClass("placeholder"))}).blur(function(){var a=jQuery(this);""!=a.val()&&a.val()!=a.attr("placeholder")||(a.addClass("placeholder"),a.val(a.attr("placeholder")))}).blur(),jQuery("body").on("click","#wp-live-chat-minimize",function(){if(jQuery.event.trigger({type:"wplc_minimize_chat"}),Cookies.set("wplc_minimize","yes",{expires:1,path:"/"}),d=Cookies.get("wplc_chat_status"),5!=d&&10!=d&&9!=d&&8!=d){var a={action:"wplc_user_minimize_chat",security:wplc_nonce,cid:b};jQuery.post(wplc_ajaxurl,a,function(a){})}}),jQuery("body").on("click","#wp-live-chat-close",function(){if(jQuery("#wp-live-chat").hide(),jQuery("#wp-live-chat-1").hide(),jQuery("#wp-live-chat-2").hide(),jQuery("#wp-live-chat-3").hide(),jQuery("#wp-live-chat-4").hide(),jQuery("#wplc_social_holder").hide(),jQuery("#nifty_ratings_holder").hide(),jQuery("#wp-live-chat-react").hide(),jQuery("#wp-live-chat-minimize").hide(),"undefined"!=typeof wplc_hide_chat&&""!==wplc_hide_chat&&null!==wplc_hide_chat)Cookies.set("wplc_hide",wplc_hide_chat,{expires:1,path:"/"});else{var a=new Date,c=2;a.setTime(a.getTime()+60*c*1e3),Cookies.set("wplc_hide","yes",{expires:a,path:"/"})}var e={action:"wplc_user_close_chat",security:wplc_nonce,cid:b,status:d};jQuery.post(wplc_ajaxurl,e,function(a){})}),jQuery("body").on("click",".wp-live-chat-now",function(){s(0)}),jQuery("body").on("click","#wplc_start_chat_btn",function(){var c=jQuery("#wplc_name").val(),d=jQuery("#wplc_email").val();if(c.length<=0)return alert("Please enter your name"),!1;if(d.length<=0)return alert("Please enter your email address"),!1;if("1"!==jQuery("#wplc_email").attr("wplc_hide")){var e=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!e.test(d))return alert("Please Enter a Valid Email Address"),!1}l=!0,"1"===wplc_filter_run_override||h===!1||(i.status=2,n(i,!1,!1)),jQuery.event.trigger({type:"wplc_start_chat"});var f=new Date;if(f.setTime(f.getTime()+12e4),b=Cookies.get("wplc_cid"),"undefined"!=typeof b&&null!==b)var g={action:"wplc_start_chat",security:wplc_nonce,name:c,email:d,cid:b,wplcsession:a,wplc_extra_data:wplc_extra_data};else var g={action:"wplc_start_chat",security:wplc_nonce,name:c,email:d,wplcsession:a,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl,g,function(a){Cookies.set("wplc_chat_status",2,{expires:f,path:"/"}),Cookies.set("wplc_name",c,{path:"/"}),Cookies.set("wplc_email",d,{path:"/"}),b=jQuery.trim(a)})}),jQuery("body").on("click","#wplc_na_msg_btn",function(){var a=jQuery("#wplc_name").val(),c=jQuery("#wplc_email").val(),d=jQuery("#wplc_message").val(),e=jQuery("#wplc_domain_offline").val(),f=jQuery("#wplc_ip_address").val();if(a.length<=0)return alert("Please enter your name"),!1;if(c.length<=0)return alert("Please enter your email address"),!1;var g=/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;if(!g.test(c))return alert("Please Enter a Valid Email Address"),!1;if(d.length<=0)return alert("Please enter a message"),!1;jQuery("#wp-live-chat-2-info").hide(),jQuery("#wplc_message_div").html(wplc_offline_msg),b=Cookies.get("wplc_cid");var h={action:"wplc_user_send_offline_message",security:wplc_nonce,cid:b,name:a,email:c,msg:d,ip:f,domain:e,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl_site,h,function(a){jQuery("#wplc_message_div").html(wplc_offline_msg3)})}),jQuery("body").on("keyup","#wplc_chatmsg",function(a){13===a.keyCode&&jQuery("#wplc_send_msg").trigger("click")}),jQuery("body").on("click","#wplc_send_msg",function(){var a=jQuery("#wplc_cid").val(),b=t(document.getElementById("wplc_chatmsg").value),c=jQuery("#wplc_name").val();"undefined"!=typeof c&&null!=c&&""!=c||(c=Cookies.get("wplc_name"));var d=jQuery("#wplc_email").val();"undefined"!=typeof d&&null!=d&&""!=d||(d=Cookies.get("wplc_email")),jQuery("#wplc_chatmsg").val("");var e=b;"undefined"!=typeof niftyFormatParser&&(e=niftyFormatParser(e)),"display"==wplc_display_name?wplc_gravatar_image.length>1?jQuery("#wplc_chatbox").append("<span class='wplc-user-message xcvxxcv wplc-color-bg-1 wplc-color-2 wplc-color-border-1'>"+wplc_gravatar_image+" <strong>"+c+"</strong>: "+e+"</span><br /><div class='wplc-clear-float-message'></div>"):jQuery("#wplc_chatbox").append("<span class='wplc-user-message wplc-color-bg-1 wplc-color-2 wplc-color-border-1'><img src='//www.gravatar.com/avatar/"+md5(d)+"?s=30' class='wplc-user-message-avatar' /> <strong>"+c+"</strong>: "+e+"</span><br /><div class='wplc-clear-float-message'></div>"):jQuery("#wplc_chatbox").append("<span class='wplc-user-message wplc-color-bg-1 wplc-color-2 wplc-color-border-1'>"+e+"</span><div class='wplc-clear-float-message'></div>");var f=jQuery("#wplc_chatbox")[0].scrollHeight;jQuery("#wplc_chatbox").scrollTop(f);var g={action:"wplc_user_send_msg",security:wplc_nonce,cid:a,msg:b,wplc_extra_data:wplc_extra_data};jQuery.post(wplc_ajaxurl,g,function(a){})}),jQuery(document).on("wplc_open_chat",function(a){d=Cookies.get("wplc_chat_status");u(status,function(){s()})}),String.prototype.wplcStripSlashes=function(){return this.replace(/\\(.)/gm,"$1")},"undefined"!=typeof wplc_elem_trigger_id&&""!==wplc_elem_trigger_id){var v=0,w=0;"undefined"!=typeof wplc_elem_trigger_action&&""!==wplc_elem_trigger_action&&(v=parseInt(wplc_elem_trigger_action)),"undefined"!=typeof wplc_elem_trigger_type&&""!==wplc_elem_trigger_type&&(w=parseInt(wplc_elem_trigger_type)),jQuery((1===w?"#":".")+wplc_elem_trigger_id).on(1===v?"mouseenter":"click",function(){s(0)})}});