var sowbForms=window.sowbForms||{};sowbForms.setupVcWidgetForm=function(){var n,t=jQuery,i=t('[name="so_widget_class"]'),r=t(".siteorigin_widget_form_container"),s=!1;r.on("change",".siteorigin-widget-field",function(){s=!0;var e=sowbForms.getWidgetFormValues(r),o=i.val(),n=JSON.stringify({widget_class:o,widget_data:e});n=n.replace(/\\/g,"\\\\"),t('[name="so_widget_data"]').val(n)}),i.mousedown(function(){n=i.find("option:selected")}),i.on("change",function(e){if(!s||confirm(soWidgetsVC.confirmChangeWidget)){s=!1;var o={action:"sowb_vc_widget_render_form",widget:i.val()};t.post(soWidgetsVC.ajaxUrl,o,function(e){r.html(e),r.trigger("change")},"html")}else n.attr("selected",!0)}),vc.atts.sowb_json_escaped={parse:function(e){var o=this.content().find(".wpb_vc_param_value[name="+e.param_name+"]");return _.escape(_.escape(o.val().toString()).replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"))},render:function(e,o){return _.unescape(_.unescape(o)).replace(/&#91;/g,"[").replace(/&#93;/g,"]")}},vc.events.on("shortcodeView:updated:siteorigin_widget_vc",function(){void 0!==vc.frame_window&&void 0!==vc.frame_window.sowb&&(0,vc.frame_window.jQuery)(vc.frame_window.sowb).trigger("setup_widgets")})},jQuery(function(e){sowbForms.setupVcWidgetForm()}),window.sowbForms=sowbForms;