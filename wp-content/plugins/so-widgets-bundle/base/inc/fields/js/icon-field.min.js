!function(g){var l={};g(document).on("sowsetupformfield",".siteorigin-widget-field-type-icon",function(i){var e=g(this),o=e.find(".siteorigin-widget-icon-selector"),a=o.find(".siteorigin-widget-icon-icon"),s=e.find(".siteorigin-widget-icon-selector-current"),d=e.find(".so-icon-remove"),t=e.find(".siteorigin-widget-icon-search");if(!e.data("initialized")){s.click(function(){o.slideToggle(),t.val(""),c()}),d.click(function(i){i.preventDefault(),e.find(".siteorigin-widget-active").click()});var c=function(){var n=t.val().toLowerCase();""===n?o.find(".siteorigin-widget-icon-icons-icon").show():o.find(".siteorigin-widget-icon-icons-icon").each(function(){var i=g(this),e=i.attr("data-value");-1===(e=e.replace(/-/," ")).indexOf(n)?i.hide():i.show()})};t.keyup(c).change(c);var n=function(){var e=o.find("select.siteorigin-widget-icon-family").val(),n=o.find(".siteorigin-widget-icon-icons");if(void 0!==l[e]){for(var i in n.empty(),0===g("#siteorigin-widget-font-"+e).length&&g("<link rel='stylesheet' type='text/css'>").attr("id","siteorigin-widget-font-"+e).attr("href",l[e].style_uri).appendTo("head"),l[e].icons){var t=g('<div data-sow-icon="'+l[e].icons[i]+'"/>').attr("data-value",e+"-"+i).addClass("sow-icon-"+e).addClass("siteorigin-widget-icon-icons-icon").click(function(){var i=g(this);i.hasClass("siteorigin-widget-active")?(i.removeClass("siteorigin-widget-active"),a.val(""),s.find("span").hide(),d.hide()):(n.find(".siteorigin-widget-icon-icons-icon").removeClass("siteorigin-widget-active"),i.addClass("siteorigin-widget-active"),a.val(i.data("value")),s.find("span").show().attr("data-sow-icon",i.attr("data-sow-icon")).attr("class","").addClass("sow-icon-"+e),d.show()),a.trigger("change",{isRendering:!0}),o.slideUp()});n.append(t),a.val()===e+"-"+i&&(s.find("span").show().attr("data-sow-icon",t.attr("data-sow-icon")).attr("class","").addClass("sow-icon-"+e),t.addClass("siteorigin-widget-active"))}n.prepend(n.find(".siteorigin-widget-active")),c()}},r=function(){var e=o.find("select.siteorigin-widget-icon-family").val(),i=o.find("select.siteorigin-widget-icon-family option:selected").data("icons");null!==i&&(l[e]=i),void 0!==e&&""!==e&&(void 0===l[e]?g.getJSON(soWidgets.ajaxurl,{action:"siteorigin_widgets_get_icons",family:o.find("select.siteorigin-widget-icon-family").val()},function(i){l[e]=i,n()}):n())};r(),o.find("select.siteorigin-widget-icon-family").change(function(){o.find(".siteorigin-widget-icon-icons").empty(),r()}),a.change(function(i,e){e&&e.isRendering||n()}),e.data("initialized",!0)}})}(jQuery);